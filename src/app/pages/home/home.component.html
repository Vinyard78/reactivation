<div class="container-fluid">
	<div class="row">
		<div class="col">
			<button mat-flat-button (click)="addQuestion()">
				<mat-icon mat-list-icon>add</mat-icon>
			</button>  
		</div>
	</div>
	<div class="row">
		<div class="col-6" [style.display]="showQuestion ? 'none' : 'block'">
			<table mat-table [dataSource]="allQuestions" matSort class="mat-elevation-z8 w-100">

				<ng-container matColumnDef="question">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Question </th>
					<td mat-cell *matCellDef="let element">
						<mat-accordion>
							<mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
								<mat-expansion-panel-header>
									<mat-panel-description>
										{{ element.question }}
									</mat-panel-description>
								</mat-expansion-panel-header>
								<p>{{ element.reponse }}</p>
							</mat-expansion-panel>
						</mat-accordion>
					</td>
				</ng-container>

				<ng-container matColumnDef="matiere">	
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Matière </th>
					<td mat-cell *matCellDef="let element"> {{ element.matiere }} </td>
				</ng-container>

				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Date de création </th>
					<td mat-cell *matCellDef="let element"> {{ element.date | date: 'dd/MM/yyyy' }} </td>
				</ng-container>

				<ng-container matColumnDef="button">
					<th mat-header-cell *matHeaderCellDef mat-sort-header>  </th>
					<td mat-cell *matCellDef="let element"> 
						<button mat-flat-button (click)="show(element)">
							<mat-icon mat-list-icon>fullscreen</mat-icon>
						</button>
						<button mat-flat-button (click)="delete(element.id)">
							<mat-icon mat-list-icon>delete_outline</mat-icon>
						</button>  
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
		</div>
		<div class="col-6" [style.display]="showQuestion ? 'none' : 'block'">


			<table mat-table [dataSource]="questions" matSort class="mat-elevation-z8 w-100">

			
				<ng-container matColumnDef="question">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Question </th>
					
					<td mat-cell *matCellDef="let element">
						<mat-accordion>
							<mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
								<mat-expansion-panel-header>
									<mat-panel-description>
										{{ element.question }}
									</mat-panel-description>
								</mat-expansion-panel-header>
								<p>{{ element.reponse }}</p>
							</mat-expansion-panel>
						</mat-accordion>
					</td>
				</ng-container>

				<ng-container matColumnDef="matiere">	
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Matière </th>
					<td mat-cell *matCellDef="let element"> {{ element.matiere }} </td>
				</ng-container>

				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
					<td mat-cell *matCellDef="let element"> {{ element.date | date: 'dd/MM/yyyy' }} </td>
				</ng-container>

				<ng-container matColumnDef="button">
					<th mat-header-cell *matHeaderCellDef mat-sort-header>  </th>
					<td mat-cell *matCellDef="let element"> 
						<button mat-flat-button (click)="show(element)">
							<mat-icon mat-list-icon>fullscreen</mat-icon>
						</button>
						<button mat-flat-button (click)="delete(element.id)">
							<mat-icon mat-list-icon>delete_outline</mat-icon>
						</button>  
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
		</div>
	</div>

	<div *ngIf="currentQuestion" class="row justify-content-center align-items-center" [style.height]="'500px'" [style.display]="showQuestion ? 'flex' : 'none'">
		<div>
			<button mat-fab (click)="showQuestion = false;reponse.style.display = 'none'">
				<mat-icon mat-list-icon>close</mat-icon>
			</button>
		</div>
		<div class="col-10 text-center">
			<h4>{{ currentQuestion.question }}</h4>
			<button mat-flat-button (click)="reponse.style.display = 'block'">Réponse</button>
			<div #reponse [style.display]="'none'">
				<h4>{{ currentQuestion.reponse }}</h4>
				<button mat-fab (click)="questionChecked();reponse.style.display = 'none'">
					<mat-icon mat-list-icon>check</mat-icon>
				</button>
			</div>
		</div>
	</div>

</div>
